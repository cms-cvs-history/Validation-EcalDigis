process EcalSelectiveReadoutValid  = {

  untracked PSet maxEvents = {untracked int32 input = 20}

  source = PoolSource {
      untracked vstring fileNames = {
	 '/store/RelVal/2007/6/16/RelVal-RelVal150pre6QCD_pt30_50-1182002910/0000/2A0B2745-551C-DC11-BBF4-001731AF66A3.root',
	 '/store/RelVal/2007/6/16/RelVal-RelVal150pre6QCD_pt30_50-1182002910/0000/66D0153E-441C-DC11-AC08-001731AF67C3.root',
	 '/store/RelVal/2007/6/16/RelVal-RelVal150pre6QCD_pt30_50-1182002910/0000/74224B18-4D1C-DC11-AC2D-00304870DAFB.root',
	 '/store/RelVal/2007/6/16/RelVal-RelVal150pre6QCD_pt30_50-1182002910/0000/785F0433-511C-DC11-BA3C-001731A28A31.root'
      }
   }
     
  # initialize  MessageLogger
  include "FWCore/MessageLogger/data/MessageLogger.cfi"   

  # initialize magnetic field
  include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

  # geometry (Only Ecal)
  include "Geometry/EcalCommonData/data/EcalOnly.cfi"

  module o1 = PoolOutputModule { 
         untracked string fileName = "Photon_E30GeV_all_EcalValidation.root"      
         untracked vstring outputCommands = 
         {  
           "keep *"  #,
#           "drop *_ecalUnsuppressedDigis_*_*",
#           "drop *_ecalDigis_*_*",
#           "drop *_ecalPreshowerDigis_*_*"
          }

  }
                                                                                
  # DQM services
  service = DaqMonitorROOTBackEnd{ }

    service = RandomNumberGeneratorService
    {
        PSet moduleSeeds =
        {
            untracked uint32 g4SimHits = 9876
            untracked uint32 ecalUnsuppressedDigis = 9876
        }
    }

#  service = Timing{ }
  
  service = SimpleMemoryCheck{ }

  include "SimGeneral/HepPDTESSource/data/pythiapdt.cfi"

  # run simulation, with EcalHits Validation specific watcher 
  include "SimG4Core/Application/data/SimG4Object.cfi"
  replace g4SimHits.Generator.HepMCProductLabel = "source"
#  replace g4SimHits.Watchers = {
#       { string type = "EcalSimHitsValidProducer"
#         untracked string instanceLabel="EcalValidInfo"
#         untracked bool verbose = false
#       }
#  }
		
  # Mixing Module
  include "SimGeneral/MixingModule/data/mixNoPU.cfi"

  include "CalibCalorimetry/Configuration/data/Ecal_FakeConditions.cff"

  # ECAL digitization sequence
  include "SimCalorimetry/EcalSimProducers/data/ecalDigiSequence.cff" 

  replace ecalDigis.writeSrFlags = true

  # ECAL digis validation sequence
  #include "Validation/EcalDigis/data/ecalDigisValidationSequence.cff"
  
  # Defines Ecal seletive readout validation module, ecalSelectiveReadoutValidation:
  include "Validation/EcalDigis/data/ecalSelectiveReadoutValidation.cfi"
     
  path p1 = { ecalSelectiveReadoutValidation }
  endpath outpath = { o1 }
}		
