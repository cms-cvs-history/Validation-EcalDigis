process EcalSelectiveReadoutValid  = {

  untracked PSet maxEvents = {untracked int32 input = 10}

  source = PoolSource {
      untracked vstring fileNames = {
	'/store/data/CRUZET2/Cosmics/RECO/CRUZET2_V1_v2/0008/02096A05-8B39-DD11-A16F-001617E30CE8.root',
	'/store/data/CRUZET2/Cosmics/RECO/CRUZET2_V1_v2/0008/2CBDAF04-8B39-DD11-8FB6-001617DC1F70.root',
	'/store/data/CRUZET2/Cosmics/RECO/CRUZET2_V1_v2/0008/56224A1C-8B39-DD11-A699-001617C3B6CE.root',
	'/store/data/CRUZET2/Cosmics/RECO/CRUZET2_V1_v2/0008/5C2EC507-8B39-DD11-932C-001617DBD230.root',
	'/store/data/CRUZET2/Cosmics/RECO/CRUZET2_V1_v2/0008/96A6DC06-8B39-DD11-BEE5-001617C3B6E8.root',
	'/store/data/CRUZET2/Cosmics/RECO/CRUZET2_V1_v2/0008/A0C4FA06-8B39-DD11-99AA-001617C3B70E.root',
	'/store/data/CRUZET2/Cosmics/RECO/CRUZET2_V1_v2/0008/D0730D06-8B39-DD11-A938-001617E30CD4.root',
	'/store/data/CRUZET2/Cosmics/RECO/CRUZET2_V1_v2/0008/D09B7C05-8B39-DD11-B7CC-001617E30F58.root',
	'/store/data/CRUZET2/Cosmics/RECO/CRUZET2_V1_v2/0008/E4F2961B-8B39-DD11-8875-000423D9939C.root',
	'/store/data/CRUZET2/Cosmics/RECO/CRUZET2_V1_v2/0018/8CEEA54A-A73B-DD11-8B5B-000423D6B42C.root'
}
   }

  include "EventFilter/EcalRawToDigiDev/data/EcalUnpackerData.cfi"
     
  # initialize  MessageLogger
  include "FWCore/MessageLogger/data/MessageLogger.cfi"   

  replace MessageLogger.cerr.INFO.limit = 1

  # initialize magnetic field
  include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

  # geometry (Only Ecal)
  include "Geometry/EcalCommonData/data/EcalOnly.cfi"
  include "Geometry/CaloEventSetup/data/CaloGeometry.cff"
  include "Geometry/CaloEventSetup/data/EcalTrigTowerConstituents.cfi"
  include "Geometry/EcalMapping/data/EcalMapping.cfi"
  include "Geometry/EcalMapping/data/EcalMappingRecord.cfi"

 # DQM services
  include "DQMServices/Core/data/DQM.cfg"
  replace DQM.collectorHost = ""

  
  service = SimpleMemoryCheck{ }

  include "CalibCalorimetry/Configuration/data/Ecal_FakeConditions.cff"

  # For TPG scale:
  es_source tpparams12 = EmptyESSource {
       string recordName = "EcalTPGPhysicsConstRcd"
       vuint32 firstValid = { 1 }
       bool iovIsRunNotTime = true
  }
  
  # Defines Ecal seletive readout validation module, ecalSelectiveReadoutValidation:
  include "Validation/EcalDigis/data/ecalSelectiveReadoutValidation.cfi"
  replace ecalSelectiveReadoutValidation.EbDigiCollection = ecalEBunpacker:ebDigis
  replace ecalSelectiveReadoutValidation.EeDigiCollection = ecalEBunpacker:eeDigis
  replace ecalSelectiveReadoutValidation.EbSrFlagCollection = ecalEBunpacker:
  replace ecalSelectiveReadoutValidation.EeSrFlagCollection = ecalEBunpacker:
  replace ecalSelectiveReadoutValidation.TrigPrimCollection = ecalEBunpacker:EcalTriggerPrimitives
  replace ecalSelectiveReadoutValidation.tpInGeV = false


  # ROOT subdirectory for histograms:
  replace ecalSelectiveReadoutValidation.histDir = ""

  # List of histogram to produce:
  replace ecalSelectiveReadoutValidation.histograms = {
     EcalDccEventSize, #DCC event fragment size
     EcalReadoutUnitForcedBitMap, #Trigger tower readout forced bit on
     EcalFullReadoutSRFlagMap, #Full Read-out trigger tower
     EcalHighInterestTriggerTowerFlagMap, #Low interest trigger tower flags 1 distribution
     EcalLowInterestTriggerTowerFlagMap, #Low interest trigger tower flags iPhi
     EcalEventSize, #ECAL data volume
     EBEventSize, #Barrel data volume
     EBHighInterestPayload, #Barrel high interest data volume
     EBLowInterestPayload, #Barrel low interest data volume
     EEEventSize, #Endcap data volume
     EEHighInterestPayload, #Endcap high interest data volume
     EELowInterestPayload, #Endcap low interest data volume
     EcalHighInterestPayload, #ECAL high interest data volume
     EcalLowInterestPayload #ECAL low interest data volume
  }
   
  # disable warning message about missing collections:
  replace ecalSelectiveReadoutValidation.warnIfCollectionNotFound = false

  path p1 = { ecalEBunpacker, ecalSelectiveReadoutValidation }
}		
