process EcalSelectiveReadoutValid  = {

  untracked PSet maxEvents = {untracked int32 input = 10}

  source = PoolSource {
      untracked vstring fileNames = {
'/store/data/CRUZET2/Cosmics/RAW/v1/000/046/629/9A33ABCA-F037-DD11-8D85-000423D6BA18.root',
'/store/data/CRUZET2/Cosmics/RAW/v1/000/046/629/9CE2CDB9-F137-DD11-9840-000423D992DC.root',
'/store/data/CRUZET2/Cosmics/RAW/v1/000/046/629/F46E124B-F137-DD11-9FF4-000423D6B358.root'
      }
   }

  include "EventFilter/EcalRawToDigiDev/data/EcalUnpackerData.cfi"
     
  # initialize  MessageLogger
  include "FWCore/MessageLogger/data/MessageLogger.cfi"   

  replace MessageLogger.cerr.INFO.limit = 1

  # initialize magnetic field
  include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

  # geometry (Only Ecal)
  include "Geometry/EcalCommonData/data/EcalOnly.cfi"
  include "Geometry/CaloEventSetup/data/CaloGeometry.cff"
  include "Geometry/CaloEventSetup/data/EcalTrigTowerConstituents.cfi"
  include "Geometry/EcalMapping/data/EcalMapping.cfi"
  include "Geometry/EcalMapping/data/EcalMappingRecord.cfi"

 # DQM services
  include "DQMServices/Core/data/DQM.cfg"
  replace DQM.collectorHost = ""

  
  service = SimpleMemoryCheck{ }

  include "CalibCalorimetry/Configuration/data/Ecal_FakeConditions.cff"

  # For TPG scale:
  es_source tpparams12 = EmptyESSource {
       string recordName = "EcalTPGPhysicsConstRcd"
       vuint32 firstValid = { 1 }
       bool iovIsRunNotTime = true
  }
  
  # Defines Ecal seletive readout validation module, ecalSelectiveReadoutValidation:
  include "Validation/EcalDigis/data/ecalSelectiveReadoutValidation.cfi"
  replace ecalSelectiveReadoutValidation.EbDigiCollection = ecalEBunpacker:ebDigis
  replace ecalSelectiveReadoutValidation.EeDigiCollection = ecalEBunpacker:eeDigis
  replace ecalSelectiveReadoutValidation.EbSrFlagCollection = ecalEBunpacker:
  replace ecalSelectiveReadoutValidation.EeSrFlagCollection = ecalEBunpacker:
  replace ecalSelectiveReadoutValidation.TrigPrimCollection = ecalEBunpacker:EcalTriggerPrimitives
  replace ecalSelectiveReadoutValidation.tpInGeV = false
  replace ecalSelectiveReadoutValidation.histograms = {
     dccVolFromData, #DCC event fragment size
     forcedTt, #Trigger tower readout forced bit on
     fullRoTt, #Full Read-out trigger tower
     hiTtf, #Low interest trigger tower flags 1 distribution
     liTtf, #Low interest trigger tower flags iPhi
     vol, #ECAL data volume
     volB, #Barrel data volume
     volBHI, #Barrel high interest data volume
     volBLI, #Barrel low interest data volume
     volE, #Endcap data volume
     volEHI, #Endcap high interest data volume
     volELI, #Endcap low interest data volume
     volHI #ECAL high interest data volume
  }
   
  path p1 = { ecalEBunpacker, ecalSelectiveReadoutValidation }
}		
