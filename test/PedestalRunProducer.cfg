process testECALDigi = 
{

   untracked PSet maxEvents = {untracked int32 input = 10}

   service = Timing { } 

   service = RandomNumberGeneratorService
   {
      untracked uint32 sourceSeed = 98765
      PSet moduleSeeds =
      {
         untracked uint32 VtxSmeared = 12345
         untracked uint32 g4SimHits = 9876
         untracked uint32 simEcalUnsuppressedDigis = 12345
      }
   }
   module randomEngineStateProducer = RandomEngineStateProducer { }	

   # initialize  MessageLogger
   include "FWCore/MessageLogger/data/MessageLogger.cfi"
 
   # initialize magnetic field
   include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
  
   #Geometry
   #
   include "Geometry/EcalCommonData/data/EcalOnly.cfi"

   es_module = TrackerGeometricDetESModule {}
   
   # output
   module out = PoolOutputModule 
   {	
      untracked string fileName = 'digis.root'
   }

   include "SimGeneral/HepPDTESSource/data/pythiapdt.cfi"

   untracked PSet maxEvents = {untracked int32 input = 10}

   # create empty events using a neutrino gun
   #
   source = FlatRandomEGunSource
   {
      untracked PSet PGunParameters =
      {
         # you can request more than 1 particle
         untracked vint32 PartID = {14}
         untracked double MinEta = -3.0
         untracked double MaxEta =  3.0
         untracked double MinPhi = -3.14159265358979323846 # in radians
         untracked double MaxPhi =  3.14159265358979323846
         untracked double MinE   =  9.99
         untracked double MaxE   = 10.01
      }
      untracked int32 Verbosity = 0 # set to 1 (or greater)  for printouts
   }

   include "IOMC/EventVertexGenerators/data/VtxSmearedGauss.cfi"
   
   # Geant4-based CMS Det.Simulation
   #
   include "SimG4Core/Application/data/g4SimHits.cfi"

   module mix = MixingModule {
      int32 bunchspace = 25
   }

   include "Geometry/CaloEventSetup/data/CaloGeometry.cff"

   # use trivial ESProducer for tests
   include "CalibCalorimetry/EcalTrivialCondModules/data/EcalTrivialCondRetriever.cfi"

   include "SimCalorimetry/EcalSimProducers/data/ecaldigi.cfi"

   path p = { VtxSmeared, g4SimHits, mix, simEcalUnsuppressedDigis, randomEngineStateProducer }
   endpath fine = { out }

}

