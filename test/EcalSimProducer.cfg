process testECALDigi = 
{

  # input
  source = PoolSource {
     untracked vstring fileNames = {'file:simevent.root'}
     untracked int32 maxEvents = -1
     untracked uint32 debugVebosity = 10
     untracked bool   debugFlag     = true
  }

  #Geometry
  #
  include "Geometry/CMSCommonData/data/cmsSimIdealGeometryXML.cfi"
  # output
  module out = PoolOutputModule 
   {	
      untracked string fileName = 'digis.root'
   }

   module mix = MixingModule {
         secsource input = PoolRASource  {
		 untracked vstring fileNames = {'file:simevent.root'}
         string type = "poisson"
         double averageNumber = 0
         int32 minBunch = xxx
         int32 maxBunch = xxx
         int32 seed = 1234567
         }
         int32 bunchspace = 25
   }

  es_module = EcalPreshowerGeometryEP {}
  es_module = EcalBarrelGeometryEP {}
  es_module = EcalEndcapGeometryEP {}
  es_module = HcalHardcodeGeometryEP {}
  es_module = CaloTowerHardcodeGeometryEP {}
  es_module = CaloGeometryBuilder {}

  include "SimCalorimetry/EcalSimProducers/data/ecaldigi.cfi"

  service = MessageLogger { 
    untracked vstring destination = {"cout"}
    PSet cout = { PSet default = { int32 limit32=0 } } 
  }

  path p = { mix, ecaldigi }
  endpath fine = { out }

}

